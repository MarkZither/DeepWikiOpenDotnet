@using deepwiki_open_dotnet.Web.Services
@inject ChatStateService ChatState
@namespace deepwiki_open_dotnet.Web.Components.Shared

<input id="chat-input" class="form-control w-100" @bind="InputText" placeholder="Ask a question..." />
<button id="send-btn" class="btn btn-primary mt-2" disabled="@IsDisabled" @onclick="OnSendClicked">Send</button>

@code {
    private string InputText { get; set; } = string.Empty;

    [Parameter]
    public EventCallback<string> OnSubmit { get; set; }

    private bool IsDisabled => ChatState.IsGenerating;

    private async Task OnSendClicked()
    {
        if (string.IsNullOrWhiteSpace(InputText))
            return; // prevent empty submissions

        // raise event for parent to handle (Chat.razor will send to API)
        await OnSubmit.InvokeAsync(InputText);
        InputText = string.Empty;
    }
}
